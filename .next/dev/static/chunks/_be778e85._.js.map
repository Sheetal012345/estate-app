{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/Desktop/project1/estate-app/app/_components/FreeAddressSearch.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport axios from \"axios\";\r\nimport { useState } from \"react\";\r\n\r\nfunction FreeAddressSearch({ selectedAddress, setCoordinates }) {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  const fetchSuggestions = async (value) => {\r\n    setQuery(value);\r\n\r\n    if (value.length < 3) {\r\n      setSuggestions([]);\r\n      return;\r\n    }\r\n\r\n    const res = await axios.get(\"https://photon.komoot.io/api/\", {\r\n      params: {\r\n        q: value,\r\n        limit: 5,\r\n      },\r\n    });\r\n\r\n    setSuggestions(res.data.features);\r\n  };\r\n\r\n  const handleSelect = (place) => {\r\n    const lat = Number(place.geometry.coordinates[1]);\r\n    const lng = Number(place.geometry.coordinates[0]);\r\n\r\n    const name = place.properties.name || \"\";\r\n    const city = place.properties.city || \"\";\r\n    const country = place.properties.country || \"\";\r\n\r\n    const fullAddress = `${name}, ${city}, ${country}`;\r\n\r\n  console.log(\"FULL ADDRESS:\", fullAddress);\r\n  console.log(\"LAT:\", lat);\r\n  console.log(\"LNG:\", lng);\r\n  console.log(\"RAW PLACE OBJECT:\", place);\r\n\r\n    setQuery(fullAddress);\r\n    setSuggestions([]);\r\n\r\n    // ✅ THESE ARE PROPS (NOW DEFINED)\r\n    selectedAddress?.(fullAddress);\r\n    setCoordinates({ lat, lng });\r\n//     setCoordinates({\r\n//   lat: 19.075983,\r\n//   lng: 72.877655,\r\n// });\r\n\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative w-full\">\r\n      <input\r\n        value={query}\r\n        onChange={(e) => fetchSuggestions(e.target.value)}\r\n        placeholder=\"Search address\"\r\n        className=\"w-full border rounded-md p-2\"\r\n      />\r\n\r\n      {suggestions.length > 0 && (\r\n        <div className=\"absolute z-[10000] bg-white border w-full rounded-md shadow\">\r\n          {suggestions.map((place, index) => (\r\n            <div\r\n              key={index}\r\n              onClick={() => handleSelect(place)}\r\n              className=\"p-2 cursor-pointer hover:bg-gray-100\"\r\n            >\r\n              {place.properties.name},{\" \"}\r\n              {place.properties.city},{\" \"}\r\n              {place.properties.country}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FreeAddressSearch;"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKA,SAAS,kBAAkB,EAAE,eAAe,EAAE,cAAc,EAAE;;IAC5D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC,EAAE;IAEjD,MAAM,mBAAmB,OAAO;QAC9B,SAAS;QAET,IAAI,MAAM,MAAM,GAAG,GAAG;YACpB,eAAe,EAAE;YACjB;QACF;QAEA,MAAM,MAAM,MAAM,mJAAK,CAAC,GAAG,CAAC,iCAAiC;YAC3D,QAAQ;gBACN,GAAG;gBACH,OAAO;YACT;QACF;QAEA,eAAe,IAAI,IAAI,CAAC,QAAQ;IAClC;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,MAAM,OAAO,MAAM,QAAQ,CAAC,WAAW,CAAC,EAAE;QAChD,MAAM,MAAM,OAAO,MAAM,QAAQ,CAAC,WAAW,CAAC,EAAE;QAEhD,MAAM,OAAO,MAAM,UAAU,CAAC,IAAI,IAAI;QACtC,MAAM,OAAO,MAAM,UAAU,CAAC,IAAI,IAAI;QACtC,MAAM,UAAU,MAAM,UAAU,CAAC,OAAO,IAAI;QAE5C,MAAM,cAAc,GAAG,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,SAAS;QAEpD,QAAQ,GAAG,CAAC,iBAAiB;QAC7B,QAAQ,GAAG,CAAC,QAAQ;QACpB,QAAQ,GAAG,CAAC,QAAQ;QACpB,QAAQ,GAAG,CAAC,qBAAqB;QAE/B,SAAS;QACT,eAAe,EAAE;QAEjB,kCAAkC;QAClC,kBAAkB;QAClB,eAAe;YAAE;YAAK;QAAI;IAC9B,uBAAuB;IACvB,oBAAoB;IACpB,oBAAoB;IACpB,MAAM;IAEJ;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,OAAO;gBACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;gBAChD,aAAY;gBACZ,WAAU;;;;;;YAGX,YAAY,MAAM,GAAG,mBACpB,6LAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAC,OAAO,sBACvB,6LAAC;wBAEC,SAAS,IAAM,aAAa;wBAC5B,WAAU;;4BAET,MAAM,UAAU,CAAC,IAAI;4BAAC;4BAAE;4BACxB,MAAM,UAAU,CAAC,IAAI;4BAAC;4BAAE;4BACxB,MAAM,UAAU,CAAC,OAAO;;uBANpB;;;;;;;;;;;;;;;;AAanB;GA5ES;KAAA;uCA8EM"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/Desktop/project1/estate-app/utils/supabase/client.js"],"sourcesContent":["\r\nimport { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_API_KEY;\r\nexport const supabase = createClient(supabaseUrl, supabaseKey)"],"names":[],"mappings":";;;;AAGoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AACC,MAAM,WAAW,IAAA,iMAAY,EAAC,aAAa"}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/Desktop/project1/estate-app/app/%28routes%29/add-new-listing/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport FreeAddressSearch from \"@/app/_components/FreeAddressSearch\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { supabase } from \"@/utils/supabase/client\";\r\nimport { useUser } from \"@clerk/nextjs\";\r\nimport React, { useState } from \"react\";\r\nimport { toast } from \"sonner\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\n// ✅ FIX: import the CORRECT map component\r\nconst LeafletMap = dynamic(\r\n  () => import(\"@/app/_components/LeafletMapSection\"),\r\n  { ssr: false }\r\n);\r\n\r\nfunction AddNewListing() {\r\n  const [selectedAddress, setSelecetedAddress] = useState(null);\r\n  const [coordinates, setCoordinates] = useState(null);\r\n  const { user } = useUser();\r\n  const router = useRouter();\r\n\r\n  const nextHandler = async () => {\r\n    if (!user) {\r\n    toast(\"Please login to post a listing\");\r\n    router.push(\"/sign-in\");\r\n    return; // ⛔ STOP execution\r\n  }\r\n    if (\r\n      !selectedAddress ||\r\n      !coordinates ||\r\n      typeof coordinates.lat !== \"number\" ||\r\n      typeof coordinates.lng !== \"number\"\r\n    ) {\r\n      toast(\"Please select a location from the map\");\r\n      return;\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"listing\")\r\n      .insert([\r\n        {\r\n          address: selectedAddress,\r\n          coordinates: {\r\n            lat: coordinates.lat,\r\n            lng: coordinates.lng,\r\n          },\r\n          createdBy: user?.primaryEmailAddress?.emailAddress,\r\n          active: false,\r\n        },\r\n      ])\r\n      .select();\r\n\r\n    if (data) {\r\n      toast(\"New Address added for listing\");\r\n      router.replace(\"/edit-listing/\" + data[0].id);\r\n    }\r\n\r\n    if (error) {\r\n      toast(\"Server side error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-10 md:mx-56 lg:mx-80\">\r\n      <div className=\"p-10 flex flex-col gap-5 items-center justify-center\">\r\n        <h2 className=\"font-bold text-2xl\">Add New Listing</h2>\r\n\r\n        <div className=\"p-10 rounded-lg border shadow-md flex flex-col gap-5 w-[500px]\">\r\n          <h2 className=\"text-gray-500\">\r\n            Enter Address which you want to list\r\n          </h2>\r\n\r\n          <FreeAddressSearch\r\n            selectedAddress={(value) => setSelecetedAddress(value)}\r\n            setCoordinates={(value) => setCoordinates(value)}\r\n          />\r\n\r\n          {/* ✅ MAP NOW RENDERS\r\n          <LeafletMap coordinates={coordinates} height={500} /> */}\r\n          <LeafletMap\r\n  coordinates={coordinates}\r\n  setCoordinates={setCoordinates}\r\n  height={500}\r\n/>\r\n\r\n          <Button\r\n            disabled={\r\n              !selectedAddress ||\r\n              !coordinates ||\r\n              !coordinates.lat ||\r\n              !coordinates.lng\r\n            }\r\n            onClick={nextHandler}\r\n          >\r\n            Next\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddNewListing;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AATA;;;;;;;;;AAWA,0CAA0C;AAC1C,MAAM,aAAa,IAAA,6KAAO,EACxB;;;;;;IACE,KAAK;;KAFH;AAKN,SAAS;;IACP,MAAM,CAAC,iBAAiB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IACxD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,qLAAO;IACxB,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,cAAc;QAClB,IAAI,CAAC,MAAM;YACX,IAAA,oJAAK,EAAC;YACN,OAAO,IAAI,CAAC;YACZ,QAAQ,mBAAmB;QAC7B;QACE,IACE,CAAC,mBACD,CAAC,eACD,OAAO,YAAY,GAAG,KAAK,YAC3B,OAAO,YAAY,GAAG,KAAK,UAC3B;YACA,IAAA,oJAAK,EAAC;YACN;QACF;QAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,0IAAQ,CACnC,IAAI,CAAC,WACL,MAAM,CAAC;YACN;gBACE,SAAS;gBACT,aAAa;oBACX,KAAK,YAAY,GAAG;oBACpB,KAAK,YAAY,GAAG;gBACtB;gBACA,WAAW,MAAM,qBAAqB;gBACtC,QAAQ;YACV;SACD,EACA,MAAM;QAET,IAAI,MAAM;YACR,IAAA,oJAAK,EAAC;YACN,OAAO,OAAO,CAAC,mBAAmB,IAAI,CAAC,EAAE,CAAC,EAAE;QAC9C;QAEA,IAAI,OAAO;YACT,IAAA,oJAAK,EAAC;QACR;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAqB;;;;;;8BAEnC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAgB;;;;;;sCAI9B,6LAAC,sJAAiB;4BAChB,iBAAiB,CAAC,QAAU,oBAAoB;4BAChD,gBAAgB,CAAC,QAAU,eAAe;;;;;;sCAK5C,6LAAC;4BACT,aAAa;4BACb,gBAAgB;4BAChB,QAAQ;;;;;;sCAGA,6LAAC,wIAAM;4BACL,UACE,CAAC,mBACD,CAAC,eACD,CAAC,YAAY,GAAG,IAChB,CAAC,YAAY,GAAG;4BAElB,SAAS;sCACV;;;;;;;;;;;;;;;;;;;;;;;AAOX;GArFS;;QAGU,qLAAO;QACT,kJAAS;;;MAJjB;uCAuFM"}}]
}